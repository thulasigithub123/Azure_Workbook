<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vulnerability Management</title>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body {
        font-family: Arial, sans-serif;
    }
    header {
        background-color: #333;
        color: #fff;
        padding: 10px 0;
        text-align: center;
    }
    .section-container {
        padding: 20px;
        margin: 20px auto;
        width: 80%;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f9f9f9;
    }
    .table-container {
        overflow-x: auto;
    }
</style>
</head>
<body>
    <a href="{% url 'index' %}">Back to Home</a>

<header>
    <h1>Action Updates</h1>
</header>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-6">
            <section id="vulnerabilityForm" class="section-container">
                <h2>Enter Vulnerability Details</h2>
                <form id="vulnerabilityEntryForm">
                    <div class="mb-3">
                        <label for="cveInput" class="form-label">CVE:</label>
                        <input type="text" class="form-control" id="cveInput" name="cveInput" required maxlength="20">
                    </div>
                    <div class="mb-3">
                        <label for="severityInput" class="form-label">Severity:</label>
                        <input type="text" class="form-control" id="severityInput" name="severityInput" required maxlength="10">
                    </div>
                    <div class="mb-3">
                        <label for="remediationInput" class="form-label">Remediation:</label>
                        <input type="text" class="form-control" id="remediationInput" name="remediationInput" required maxlength="50">
                    </div>
                    <div class="mb-3">
                        <label for="patchingDateInput" class="form-label">Patching Date:</label>
                        <input type="date" class="form-control" id="patchingDateInput" name="patchingDateInput">
                    </div>
                    <div class="mb-3">
                        <label for="patchingScheduleInput" class="form-label">Patching Schedule:</label>
                        <select class="form-select" id="patchingScheduleInput" name="patchingScheduleInput">
                            <option value="automatic">Automatic</option>
                            <option value="manual">Manual</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="productsInput" class="form-label">Products:</label>
                        <select multiple class="form-select" id="productsInput" name="productsInput">
                            <option value="IE">Internet Explorer</option>
                            <option value="security">Security</option>
                            <option value="OS_non_security">Operating System (Non-Security)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </section>
        </div>
        <div class="col-md-6">
            <section id="vulnerabilityList" class="section-container">
                <h2>Vulnerability List</h2>
                <div class="table-container">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Hostname</th>
                                <th>IP Address</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="vulnerabilityTableBody">
                            <!-- Table data will be populated dynamically using JavaScript -->
                            <tr>
                                <td>example.com</td>
                                <td>192.168.1.10</td>
                                <td>Update to latest version</td>
                            </tr>
                            <tr>
                                <td>test.com</td>
                                <td>192.168.1.20</td>
                                <td>Apply security patch</td>
                            </tr>
                            <tr>
                                <td>demo.com</td>
                                <td>192.168.1.30</td>
                                <td>Update to latest version</td>
                            </tr>
                            <tr>
                                <td>website.com</td>
                                <td>192.168.1.40</td>
                                <td>Apply security patch</td>
                            </tr>
                            <tr>
                                <td>app.com</td>
                                <td>192.168.1.50</td>
                                <td>Update to latest version</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // Function to handle form submission
    document.getElementById("vulnerabilityEntryForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent default form submission
        var cve = document.getElementById("cveInput").value;
        var severity = document.getElementById("severityInput").value;
        var remediation = document.getElementById("remediationInput").value;
        var patchingDate = document.getElementById("patchingDateInput").value;
        var patchingSchedule = document.getElementById("patchingScheduleInput").value;
        var products = Array.from(document.getElementById("productsInput").selectedOptions).map(option => option.value);

        // Repopulate the table
        var tableBody = document.getElementById("vulnerabilityTableBody");
        var newRow = document.createElement("tr");
        newRow.innerHTML = "<td>" + cve + "</td><td>" + severity + "</td><td>" + remediation + "</td>";
        tableBody.appendChild(newRow);

        // Clear the form fields
        document.getElementById("vulnerabilityEntryForm").reset();
    });
</script>
</body>
</html>
